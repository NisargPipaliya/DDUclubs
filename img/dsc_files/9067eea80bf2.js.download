__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);const t=4,s=i(d[1])['in-feed-story-item-width'].value+8,n=i(d[1])['desktop-in-feed-story-item-width'].value+12,o=3,l=150;var h=r(d[22]).displayDoneBlocking('InFeedStoryTray',r(d[23]).connect(function(t,s){const n=r(d[17]).getSeenCountInStoryTray(t),o=r(d[17]).getFeedStoryTrayWithoutOwn(t),l=r(d[17]).getStoryTrayFromReelOrdering(t,s.reelIds);return{broadcasts:r(d[18]).getBroadcastStoryTrayItems(t),dataFetchStatus:t.feed.extrasDataFetchStatus,feedFilter:r(d[19]).getFeedFilter(t),hasOwnReel:r(d[17]).userHasReel(t,i(d[3])(t.users.viewerId)),hasSeenZeroNUX:!!t.zero.nuxPreference.story,isFullySeen:s=>{if(null!=s){const n=r(d[17]).getFirstUnseenReelItemIndex(t,s);return null!=n&&n<0}return!1},loadingId:t.stories.trayLoadingId,newReelCount:t.stories.feedTray&&t.stories.feedTray.count()-i(d[3])(n),reels:l||o,seenReelCount:n,storyPrefetchFinished:t.feed.storyPrefetchComplete,traySession:t.stories.traySession,viewerId:i(d[3])(t.users.viewerId),viewportWidth:t.displayProperties.viewportWidth}},function(t){return{onLoadReel(s,n,o){t(r(d[20]).openReelsMedia(s,'reel_feed_timeline',n,o))},onUpdateZeroNUXPreference(){t(r(d[21]).updateZeroNUXPreference(r(d[2]).ZeroNUXMedia.story))},onStoryItemScrollEnter(s,n){t(r(d[20]).loadReelsMediaForTray(n,s,{batchSize:15,fetchDistance:5}))}}})(class extends a(d[6]).PureComponent{constructor(...h){super(...h),this.state={isZeroBannerEligible:r(d[2]).isZeroRatingSlimEligible(),leftVisibleCard:-1,rightVisibleCard:-1},this.$InFeedStoryTray2=((t,s)=>{this.props.onLoadReel(i(d[3])(this.props.reels),t,s)}),this.$InFeedStoryTray3=(()=>{this.props.onLoadReel(i(d[3])(this.props.reels))}),this.$InFeedStoryTray4=((t,s)=>{this.$InFeedStoryTray5(t,s);const n=i(d[3])(this.props.reels).map(t=>t.id);this.props.onStoryItemScrollEnter(n.toArray(),t)}),this.$InFeedStoryTray5=((t,s)=>{i(d[4]).log(()=>({client_position:null,delivery_flags:null,filtering_tag:null,hide_in_feed_unit_if_seen:Boolean(this.props.hideUnitIfSeen),hide_unit_if_seen:null,inventory_source:'',m_ix:null,media_author_id:t,media_index:null,module_name:'reel_feed_timeline',new_reel_count:i(d[3])(this.props.newReelCount),pigeon_reserved_keyword_module:'reel_feed_timeline',seen_reels:this.props.seenReelCount,tracking_token:null,tray_session_id:this.props.traySession,unfetched_reel_count:null,unseen_reels:null,viewed_reel_count:i(d[3])(this.props.seenReelCount)}))}),this.$InFeedStoryTray6=(()=>r(d[5]).isDesktop()?n:s),this.$InFeedStoryTray7=(({index:t,isVisible:s})=>{const n=this.$InFeedStoryTray6(),o={isVisible:s,isZeroBannerEligible:this.state.isZeroBannerEligible,onClick:this.$InFeedStoryTray2,onScrollEnter:this.$InFeedStoryTray4,trayPosition:t,onUpdateZeroNUXPreference:this.props.onUpdateZeroNUXPreference,hasSeenZeroNUX:this.props.hasSeenZeroNUX},l=i(d[3])(this.props.reels),h=i(d[3])(l.get(t)),y=a(d[6]).createElement(i(d[7]),i(d[8])({reel:h},o));return a(d[6]).createElement("div",{className:`g8rEa ${r(d[5]).isDesktop()?"eju6Z":""}`,key:h.id,style:r(d[9]).hasStoriesCaching()&&r(d[5]).isMobile()?{transform:`translateX(${t*n}px)`}:void 0},y)}),this.$InFeedStoryTray8=(t=>{const{leftPct:s,rightPct:n}=t,{leftVisibleCard:o,rightVisibleCard:l}=this.state,h=Math.floor(s),y=Math.ceil(n);o===h&&l===y||this.setState({leftVisibleCard:h,rightVisibleCard:y})}),this.$InFeedStoryTray9=i(d[10])((t,s,n)=>[...t.toArray().map((t,o)=>this.$InFeedStoryTray7({index:o,isVisible:o>=s&&o<=n}))]),this.$InFeedStoryTray10=(()=>{const{reels:s,viewportWidth:h}=this.props,{leftVisibleCard:y,rightVisibleCard:c}=this.state,p=this.$InFeedStoryTray6(),u=Math.max(o,Math.ceil(h/p));return null==s?null:r(d[5]).isDesktop()?a(d[6]).createElement(i(d[11]),{animationDuration:l,autoScrollOnFocus:!1,disableScrollSnap:!0,gutterWidth:10,itemWidth:n,onVisibilityChange:this.$InFeedStoryTray8,overscan:t,pagerVariant:"sidecar"},this.$InFeedStoryTray9(s,y,c)):a(d[6]).createElement(i(d[12]),{className:`_3FGxQ ${r(d[9]).hasStoriesCaching()?"X3Alp":""}`,containerSize:"auto",direction:"horizontal",estimatedItemSize:p,initialRenderCount:u,itemCount:i(d[3])(s).count(),overscanCount:t,renderer:this.$InFeedStoryTray7})})}componentDidMount(){this.$InFeedStoryTray1()}componentDidUpdate(){this.$InFeedStoryTray1()}$InFeedStoryTray1(){null!=this.props.reels&&this.props.onDisplayDone()}render(){const{className:t,reels:s}=this.props;if(null==s)return null;const n=this.$InFeedStoryTray10();return a(d[6]).createElement("div",{className:t},a(d[6]).createElement("div",{className:`_4TVuL ${r(d[5]).isMobile()?"JPhJe":""} ${r(d[5]).isDesktop()?"pVgp4":""} ${r(d[9]).hasDenserFeed()?"fVIQL":""}`},null!=this.props.title&&''!==this.props.title&&a(d[6]).createElement(i(d[13]),{direction:"row",justifyContent:"between",marginBottom:4,marginEnd:4,marginStart:4,marginTop:2},a(d[6]).createElement(i(d[14]),{color:"ig-secondary-text",weight:"semibold"},this.props.title),a(d[6]).createElement(i(d[15]),{borderless:!0,onClick:this.$InFeedStoryTray3},a(d[6]).createElement(i(d[14]),{weight:"semibold"},r(d[16]).WATCH_ALL_TEXT))),a(d[6]).createElement("div",{className:`l4Cdt ${r(d[5]).isDesktop()?"ImGjy":""}`},n)))}}));e.default=h},7340032,[7340033,12779561,12714063,12779549,7340034,12713991,3,7340035,12714473,12714150,12714106,6553808,12779720,12779580,12779571,12779574,12714165,12714154,12714689,12714436,12714697,6553803,12779595,5]);
__d(function() {},7340033,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});const o={falco:!0,pigeon:!1};e.default=class{static log(t){r(d[0]).FalcoLogger.log('instagram_story_tray_impression',t(),{},o)}}},7340034,[12714046]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);let t=0;var s=r(d[11]).connect(function(t,s){const o=r(d[9]).getUserById(t,i(d[2])(s.reel.userId)),n=t.stories.reels.get(s.reel.id);let l=null;if(null!=(null===n||void 0===n?void 0:n.itemIds)&&i(d[2])(null===n||void 0===n?void 0:n.itemIds).length>0){const o=r(d[10]).getInitialReelIndex(t,s.reel.id),p=i(d[2])(null===n||void 0===n?void 0:n.itemIds)[o];p&&(l=t.posts.byId.get(p))}return{isLoading:t.stories.trayLoadingId===s.reel.id,isMuted:s.reel.muted,isSeen:r(d[10]).isReelSeen(s.reel),profilePictureUrl:i(d[2])(o.profilePictureUrl),username:i(d[2])(o.username),previewItem:l}})(class extends a(d[3]).PureComponent{constructor(...s){super(...s),this.state={isZeroNuxOpen:!1},this.$InFeedStoryTrayItem1=i(d[1])(s=>`InFeedStoryTrayItem_${t++}`),this.$InFeedStoryTrayItem3=(()=>{!0===this.props.isZeroBannerEligible?this.showZeroNuxOrPlay():this.props.onClick(this.props.reel.id,this.$InFeedStoryTrayItem1(this.props.reel.id))}),this.$InFeedStoryTrayItem2=(()=>{this.props.onScrollEnter(i(d[2])(this.props.reel.userId),this.props.trayPosition)}),this.$InFeedStoryTrayItem4=(t=>{t&&t.stopPropagation(),this.setState({isZeroNuxOpen:!1})}),this.$InFeedStoryTrayItem5=(t=>{t.stopPropagation();const{onUpdateZeroNUXPreference:s}=this.props;s&&s(),this.setState({isZeroNuxOpen:!1}),this.props.onClick(this.props.reel.id,this.$InFeedStoryTrayItem1(this.props.reel.id))}),this.showZeroNuxOrPlay=(()=>{!0!==this.props.hasSeenZeroNUX?this.setState({isZeroNuxOpen:!0}):this.props.onClick(this.props.reel.id,this.$InFeedStoryTrayItem1(this.props.reel.id))}),this.renderPreview=(()=>{const{isSeen:t,previewItem:s}=this.props;return null!=s&&null!=s.src&&''!==s.src?a(d[3]).createElement("div",{className:`eN6wV ${r(d[4]).isDesktop()?"_8BNxr":""} ${t?"INVJ1":""}`},a(d[3]).createElement(i(d[5]),{src:s.src,srcSet:s.displayResources})):a(d[3]).createElement("div",{className:`YOfgc ${r(d[4]).isDesktop()?"RS3jM":""}`})})}componentDidMount(){this.props.isVisible&&this.$InFeedStoryTrayItem2()}componentDidUpdate(t){!t.isVisible&&this.props.isVisible&&this.$InFeedStoryTrayItem2()}render(){const{isMuted:t,profilePictureUrl:s,username:o}=this.props;let n=null;return!0===this.props.isZeroBannerEligible&&this.state.isZeroNuxOpen&&(n=a(d[3]).createElement(i(d[6]),{mediaKeyword:r(d[7]).ZeroNUXMedia.story,onAction:this.$InFeedStoryTrayItem5,onClose:this.$InFeedStoryTrayItem4,profilePictureUrl:s})),a(d[3]).createElement("button",{className:`_1rQDQ ${t?"Trb6G":""}`,onClick:this.$InFeedStoryTrayItem3,role:"menuitem",tabIndex:"0"},this.renderPreview(),a(d[3]).createElement("div",{className:`eQXXr ${r(d[4]).isDesktop()?"UaaDv":""}`},a(d[3]).createElement(i(d[8]),{animateOnLoad:!0,clickTargetElementId:this.$InFeedStoryTrayItem1(this.props.reel.id),isClickable:!1,isLink:!1,profilePictureUrl:s,size:56,storyEntrypoint:"reel_feed_timeline",username:this.props.username}),a(d[3]).createElement("div",{className:`uI5Pp ${r(d[4]).isDesktop()?"FjOSf":""}`},o)),n)}});e.default=s},7340035,[7340036,12714106,12779549,3,12713991,3801228,7340037,12714063,12779980,12714363,12714154,5]);
__d(function() {},7340036,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]),r(d[1]);const n=66,t=!1,c=64,s=r(d[2])(426),l=r(d[2])(668);e.default=function(u){const{profilePictureUrl:o}=u;r(d[3]).useEffect(()=>{r(d[4]).logZeroEvent({event_name:'nux_impression'})},[]);const f={nuxTitle:l,nuxAction:s,nuxIcon:a(d[3]).createElement("div",{className:"TFHq6"},a(d[3]).createElement(i(d[5]),{className:"_0zJgH",seen:t,size:c}),null!=o&&''!==o&&a(d[3]).createElement(i(d[6]),{isLink:!1,profilePictureUrl:o,size:n})),nuxIcon2:a(d[3]).createElement("div",{className:"coreSpriteSpinstaNux"})};return a(d[3]).createElement(i(d[7]),i(d[8])({nuxContent:f},u))}},7340037,[12779682,7340038,12714044,3,12714087,12779984,12779638,6553821,12714473]);
__d(function() {},7340038,[]);